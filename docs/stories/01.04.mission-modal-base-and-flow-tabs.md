# <!-- Powered by BMAD™ Core -->

Firstly, read the ENTIRE files of 
docs/foundation/001-feature-requirements.md
docs/foundation/002-web-design.md
docs/foundation/003-cli-design.md
docs/foundation/004-db-design.md
docs/foundation/005-api-and-mcp-design.md
docs/foundation/006-rpc-design.md
docs/architecture.md
docs/front-end-spec.md

# Story 01.04: mission-modal-base-and-flow-tabs

## Status
Draft

## Story
**As a** reviewer or developer,
**I want** a MissionModal with Base and Flow tabs tied to mocked RPC,
**so that** I can inspect and edit key mission details and flow settings.

## Acceptance Criteria
1) Must start by reading the ENTIRE docs list shown at the top of this file.
2) MissionModal opens from card actions (or stage badge click opens Flow tab) and is keyboard accessible with focus trap and ESC to close.
3) Base tab: title, description/spec (display + minimal editing), priority, list (display-only if out of scope), stage badge display.
4) Flow tab: shows current flow and stages (Clarify, Plan, Code). Edits persisted to mock server.
5) Data fetched via /rpc.mission.get(missionId) only; updates via /rpc.mission.update; no /api usage.
6) Query hooks and mutations invalidate ['mission','get', missionId] and ['mission','list', projectId] on save.
7) Keep within single session (≤ 14k context) and < 1000 lines changed.

RPC methods to stub on server:
- mission.get(missionId)
- mission.update({ missionId, ...fields })

## Tasks / Subtasks
- [ ] MissionModal component with tabs and accessibility behaviors (AC 2).
- [ ] Base tab UI with minimal editing fields and constraints (AC 3).
- [ ] Flow tab UI allowing enable/disable per stage and persisting choices (AC 4).
- [ ] Hooks: useMission(missionId) -> ['mission','get', missionId]; mutation useUpdateMission() (AC 5,6).
- [ ] Server: missions.ts add mission.get and mission.update; persist to mockData (AC 5).

## Dev Notes
- Follow 002-web-design modal/tab structure and front-end-spec. Use consistent spacing and skeletons.
- Later stories add Review tab and advanced sections.

### Testing
- Smoke: modal open/close via keyboard and click, tab switch works.
- Unit: update mutation persists and cache invalidates, UI reflects changes.

## Change Log
| Date       | Version | Description                      | Author |
|------------|---------|----------------------------------|--------|
| 2025-09-10 | 0.1.0   | Initial draft of story 01.04     | SM     |

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

