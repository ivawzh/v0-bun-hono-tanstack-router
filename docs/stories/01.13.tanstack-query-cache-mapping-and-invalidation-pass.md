# <!-- Powered by BMAD™ Core -->

Firstly, read the ENTIRE files of 
docs/foundation/001-feature-requirements.md
docs/foundation/002-web-design.md
docs/foundation/003-cli-design.md
docs/foundation/004-db-design.md
docs/foundation/005-api-and-mcp-design.md
docs/foundation/006-rpc-design.md
docs/architecture.md
docs/front-end-spec.md

# Story 01.13: tanstack-query-cache-mapping-and-invalidation-pass

## Status
Draft

## Story
**As a** frontend maintainer,
**I want** standardized TanStack Query keys and invalidation patterns,
**so that** caching is predictable and aligned with /rpc method names per 006-rpc-design.

## Acceptance Criteria
1) Must start by reading the ENTIRE docs list shown at the top of this file.
2) Centralize query keys into apps/web/src/utils/queryKeys.ts; keys map to /rpc names.
3) Update usages to use array keys with namespace & method segments, e.g., ['project','get', id] (migrate any ['project', id] variants).
4) Ensure mutations invalidate the correct keys for mission and project operations.
5) No new /rpc endpoints required; no /api usage.
6) Keep within single session (≤ 14k context) and < 1000 lines changed.

RPC methods to stub on server:
- None

## Tasks / Subtasks
- [ ] Add queryKeys.ts with builders for project, mission, workstation, publicProject.
- [ ] Sweep and update existing hooks to new key style.
- [ ] Confirm mutation invalidations across mission.toggleReady, mission.update, mission.create, mission.review, mission.reorder, project.update.

## Dev Notes
- Document mapping rules in code comments and in this story’s Dev Notes.

### Testing
- Unit tests for queryKeys builder functions and a small set of hooks to ensure correct keys.

## Change Log
| Date       | Version | Description                      | Author |
|------------|---------|----------------------------------|--------|
| 2025-09-10 | 0.1.0   | Initial draft of story 01.13     | SM     |

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

