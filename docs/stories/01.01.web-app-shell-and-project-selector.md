# <!-- Powered by BMAD™ Core -->

Firstly, read the ENTIRE files of 
docs/foundation/001-feature-requirements.md
docs/foundation/002-web-design.md
docs/foundation/003-cli-design.md
docs/foundation/004-db-design.md
docs/foundation/005-api-and-mcp-design.md
docs/foundation/006-rpc-design.md
docs/architecture.md
docs/front-end-spec.md

# Story 01.01: web-app-shell-and-project-selector

## Status
Draft

## Story
**As a** project user,
**I want** a functional app shell with header/subheader and a project selector wired to mocked /rpc,
**so that** I can navigate the app and see context (project, PR mode, workstations) as we build the rest of the UI.

## Acceptance Criteria
1) Must start by reading the ENTIRE docs list shown at the top of this file.
2) Implement header with: Logo, Project select dropdown, Theme toggle, User menu (layout is sufficient for now).
3) Implement subheader with: Project name, PR mode indicator placeholder, online workstations count placeholder, Settings button.
4) Data is retrieved only via mocked server-side /rpc endpoints (Option A) using TanStack Query + oRPC client. No /api usage.
5) Implement and use /rpc.project.list and /rpc.project.get mocks; display selected project details in subheader.
6) TanStack Query keys map to RPC names. Use ['project','list'] for list. For get, it is acceptable in this story to use ['project', projectId]; later standardized in 01.13.
7) Project change triggers cache invalidation and updates subheader accordingly.
8) Keep within single session (≤ 14k context) and < 1000 lines changed.

RPC methods to stub on server:
- project.list()
- project.get(projectId)

## Tasks / Subtasks
- [ ] Wire oRPC client in apps/web/src/utils/orpc.ts; ensure base URL points to /rpc with credentials included (AC 4).
- [ ] Create Header component (Logo, Project select, Theme toggle, User menu) (AC 2).
- [ ] Create Subheader component (Project name, PR mode placeholder, workstation count placeholder, Settings button) (AC 3).
- [ ] Add React Query hooks: useProjectList() -> ['project','list']; useProject(projectId) -> ['project', projectId] for now (AC 5,6).
- [ ] Register mocks on server: apps/server/src/routers/rpc/projects.ts exporting project.list/get; import in rpc.ts; use apps/server/src/lib/mockData.ts (AC 4,5).
- [ ] On project change: invalidate project.get and any mission list cache (if already mounted later) (AC 7).
- [ ] Light smoke tests for shell render and project switching; ensure constraints are met (AC 8).

## Dev Notes
- Follow layout and component expectations from docs/foundation/002-web-design.md and docs/front-end-spec.md.
- Web-to-server must use /rpc only (docs/architecture.md, section Interface Boundary Rules).
- Query cache keys should align with docs/foundation/006-rpc-design.md; standardize fully in Story 01.13.

### Testing
- Smoke: header renders; dropdown lists projects; selecting another project updates subheader text.
- Unit: hook for useProjectList returns mock items; switching invalidates and refetches.

## Change Log
| Date       | Version | Description                     | Author |
|------------|---------|---------------------------------|--------|
| 2025-09-10 | 0.1.0   | Initial draft of story 01.01    | SM     |

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

