# <!-- Powered by BMAD™ Core -->

Firstly, read the ENTIRE files of 
docs/foundation/001-feature-requirements.md
docs/foundation/002-web-design.md
docs/foundation/003-cli-design.md
docs/foundation/004-db-design.md
docs/foundation/005-api-and-mcp-design.md
docs/foundation/006-rpc-design.md
docs/architecture.md
docs/front-end-spec.md

# Story 01.05: mission-create-popup-flow-first

## Status
Draft

## Story
**As a** user creating work,
**I want** a MissionCreatePopup that starts with flow selection then base fields,
**so that** new missions are configured correctly for the flow-first lifecycle.

## Acceptance Criteria
1) Must start by reading the ENTIRE docs list shown at the top of this file.
2) Modal wizard presents Flow selection (with stage toggles), then Base fields: title, description, priority, list; optional repo field, dependencies placeholder.
3) Auto-ready checkbox sets mission ready flag on creation.
4) On success, new mission appears in Todo (top or per ordering) without full reload.
5) Uses mocked /rpc.mission.create only; no /api usage.
6) Invalidate ['mission','list', projectId] after creation; optimistic append allowed with reconcile on success.
7) Keep within single session (≤ 14k context) and < 1000 lines changed.

RPC methods to stub on server:
- mission.create({ projectId, title, description, flowId, stagesConfig, autoReady, priority, list })

## Tasks / Subtasks
- [ ] Create MissionCreatePopup modal with flow selection then base form (AC 2).
- [ ] Validate required fields; disable submit until valid (AC 2).
- [ ] Mutation useCreateMission with optimistic append and cache invalidation (AC 4,6).
- [ ] Server: missions.ts add mission.create; update mockData list_order and list (AC 5).

## Dev Notes
- Follow 002-web-design and front-end-spec; share Flow editor UI with MissionModal.

### Testing
- Unit: validation, optimistic append, error rollback.
- Smoke: creating mission shows it in Todo instantly; persists after refresh.

## Change Log
| Date       | Version | Description                      | Author |
|------------|---------|----------------------------------|--------|
| 2025-09-10 | 0.1.0   | Initial draft of story 01.05     | SM     |

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

