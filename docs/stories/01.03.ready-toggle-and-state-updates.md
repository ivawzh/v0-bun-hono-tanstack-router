# <!-- Powered by BMAD™ Core -->

Firstly, read the ENTIRE files of 
docs/foundation/001-feature-requirements.md
docs/foundation/002-web-design.md
docs/foundation/003-cli-design.md
docs/foundation/004-db-design.md
docs/foundation/005-api-and-mcp-design.md
docs/foundation/006-rpc-design.md
docs/architecture.md
docs/front-end-spec.md

# Story 01.03: ready-toggle-and-state-updates

## Status
Draft

## Story
**As a** project user,
**I want** to toggle a mission’s Ready state directly on the card,
**so that** I can control whether missions are eligible for AI processing (even though we’re mocking endpoints now).

## Acceptance Criteria
1) Must start by reading the ENTIRE docs list shown at the top of this file.
2) Ready toggle button visible in Todo/Doing columns; disabled in Review/Done.
3) Clicking Ready performs optimistic update with rollback on failure; visual state updates immediately.
4) Process badge updates appropriately (Todo: Queueing, Doing: AI at work) per 002-web-design.
5) Data mutations via mocked /rpc.mission.toggleReady only; no /api usage.
6) TanStack Query invalidation updates both ['mission','list', projectId] and ['mission','get', missionId] (if mounted).
7) Keep within single session (≤ 14k context) and < 1000 lines changed.

RPC methods to stub on server:
- mission.toggleReady({ missionId, ready })

## Tasks / Subtasks
- [ ] Show Ready/Not Ready button for Todo/Doing; disable in Review/Done (AC 2).
- [ ] Add mutation hook useToggleMissionReady; apply optimistic state then rollback on error (AC 3).
- [ ] Update process badge visuals per column rules (AC 4).
- [ ] Invalidate ['mission','list', projectId] and conditionally ['mission','get', missionId] after mutation (AC 6).
- [ ] Server: apps/server/src/routers/rpc/missions.ts add mission.toggleReady; update mockData state (AC 5).

## Dev Notes
- Keep mutation error paths user-friendly; pair with toasts later in 01.11.
- Respect Web→/rpc boundary only (docs/architecture.md).

### Testing
- Unit: optimistic update/rollback behavior for mission.toggleReady mutation hook.
- Smoke: toggling Ready changes button label and card visuals; reload reflects new state.

## Change Log
| Date       | Version | Description                      | Author |
|------------|---------|----------------------------------|--------|
| 2025-09-10 | 0.1.0   | Initial draft of story 01.03     | SM     |

## Dev Agent Record
### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

